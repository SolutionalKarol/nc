<!doctype html>
<html lang="pl">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-56VR40VHHV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-56VR40VHHV');
</script>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Zoptymalizowane Tagi dla AI i SEO (specyficzne dla tej podstrony) -->
  <title>NCNI — Neuroróżnorodność (ND-affirming)</title>
  <meta name="description" content="Podejście ND-affirming w NCNI. Dowiedz się więcej o ADHD, Autyzmie (ASD), dysleksji, wysokiej wrażliwości i naszym wsparciu. Wrocław." />
  <link rel="canonical" href="https://ncni.pl/neuroroznorodnosc.html" />
  <meta name="robots" content="index,follow" />

  <!-- Assets -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Favicons (używamy logo.png, bo jest w repo) -->
  <link rel="icon" href="logo.png" />
  <link rel="apple-touch-icon" href="logo.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Open Graph / Twitter -->
  <meta name="theme-color" content="#0b1120" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="pl_PL" />
  <meta property="og:title" content="NCNI — Neuroróżnorodność (ND-affirming)" />
  <meta property="og:description" content="Podejście ND-affirming w NCNI. Dowiedz się więcej o ADHD, Autyzmie (ASD), dysleksji, wysokiej wrażliwości i naszym wsparciu." />
  <meta property="og:image" content="https://ncni.pl/og-image.jpg" />
  <meta property="og:url" content="https://ncni.pl/neuroroznorodnosc.html" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="NCNI — Neuroróżnorodność (ND-affirming)" />
  <meta name="twitter:description" content="Podejście ND-affirming w NCNI. Dowiedz się więcej o ADHD, Autyzmie (ASD), dysleksji, wysokiej wrażliwości i naszym wsparciu." />

  <!-- 
    ==================================================================
    NOWE STYLE - skopiowane z index.html i uzupełnione o style
    dla elementów specyficznych dla neuroroznorodnosc.html (np. .chips-nav)
    ==================================================================
  -->
  <style>
    :root {
      --bg1:#0A0F1F; --bg2:#101727;
      --bg-main: var(--bg2);
      --bg-section: var(--bg1);
      --bg-card: rgba(22,29,47,.6);
      --accent:#7aa2ff; /* Zmieniono na główny akcent z NCNI */
      --accent-soft: rgba(122,162,255,.18);
      --gold:#facc15; /* Złoty akcent dla Metody Kraszewskiego */
      --text-main:#e2e8f0;
      --text-muted:#94a3b8;
      --border-subtle:rgba(255,255,255,.1);
      --shadow-soft:0 10px 30px rgba(0,0,0,.2);
      --radius-xl:18px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%, #000 100%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
      line-height: 1.6;
    }
    
    img { max-width: 100%; height: auto; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { opacity: 0.9; }

    .page {
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 32px 16px 48px;
    }

    .shell {
      width: 100%;
      max-width: 1120px;
      margin: 0 auto;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.98));
      border-radius: 32px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: var(--shadow-soft);
      padding: 32px 24px 32px;
      position: relative;
      overflow: hidden;
    }

    .shell::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 10% 0%, rgba(138,92,255,.12) 0, transparent 55%),
        radial-gradient(circle at 90% 0%, rgba(122,162,255,.1) 0, transparent 55%),
        radial-gradient(circle at 50% 120%, rgba(122,162,255,.12) 0, transparent 60%);
      opacity: 0.9;
      pointer-events: none;
      z-index: 0;
    }

    .shell-inner {
      position: relative;
      z-index: 1;
    }

    /* NOWY HEADER (dla neuroroznorodnosc.html) */
    header {
      display: grid;
      grid-template-columns: minmax(0, 1fr); 
      gap: 32px;
      align-items: center;
      margin-bottom: 32px;
    }

    .eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 4px 10px 4px 4px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, rgba(122,162,255,.15), transparent 55%);
      border: 1px solid rgba(122,162,255,.4);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      /* POPRAWKA: Cały eyebrow jest linkiem do index.html */
      text-decoration: none;
      transition: background .2s, border-color .2s;
    }
    .eyebrow:hover {
      background: radial-gradient(circle at 0 0, rgba(122,162,255,.25), transparent 65%);
      border-color: rgba(122,162,255,.6);
    }

    .eyebrow-logo {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      border: 1px solid rgba(122,162,255,.8);
      margin-right: 8px;
    }

    h1 {
      margin: 16px 0 8px;
      font-size: clamp(32px, 4vw, 42px);
      line-height: 1.15;
      letter-spacing: -0.03em;
      font-weight: 700;
    }
    h1 span { color: var(--accent); }
    h2, h3, h4 { color: var(--text-main); font-weight: 600; }

    .lead {
      margin: 0 0 12px;
      font-size: 1.1rem;
      line-height: 1.6;
      color: var(--text-muted);
      max-width: 60ch;
    }

    .cta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 24px;
    }

    /* Nowe style przycisków */
    .btn-primary,
    .btn-ghost {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 22px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      border: 1px solid transparent;
      transition: transform 160ms ease, box-shadow 160ms ease, background 160ms ease, border-color 160ms ease, opacity 160ms ease;
      white-space: nowrap;
    }
    .btn-primary {
      background: radial-gradient(circle at 0 0, var(--accent), #6ea6ff);
      color: #0b1120;
      box-shadow: 0 18px 45px rgba(122,162,255, 0.35);
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 22px 60px rgba(122,162,255, 0.5);
      opacity: 0.95;
    }
    .btn-ghost {
      background: rgba(15, 23, 42, 0.94);
      color: var(--text-main);
      border-color: rgba(148, 163, 184, 0.6);
    }
    .btn-ghost:hover {
      background: rgba(15, 23, 42, 0.98);
      border-color: rgba(226, 232, 240, 0.9);
    }
    
    /* GŁÓWNA NAWIGACJA (z index.html) */
    .main-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 16px;
      justify-content: flex-start;
      margin-top: 32px;
      padding-top: 20px;
      border-top: 1px solid var(--border-subtle);
    }
    .main-nav a {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
      padding: 6px 12px;
      border-radius: 999px;
      transition: .2s;
    }
    .main-nav a:hover, .main-nav a.active {
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      opacity: 1;
    }

    /* MENU MOBILNE (z index.html) */
    #mobile-menu-toggle {
      display: none;
      background: transparent;
      border: 1px solid var(--border-subtle);
      border-radius: 999px;
      padding: 8px 10px;
      cursor: pointer;
      position: absolute;
      top: 32px;
      right: 24px;
      z-index: 1001;
    }
    #mobile-menu-toggle span {
      display: block;
      width: 20px;
      height: 2px;
      background: var(--text-main);
      margin: 4px 0;
      transition: transform 0.3s, opacity 0.3s;
    }
    #mobile-menu-toggle.is-active span:nth-child(1) { transform: rotate(45deg) translate(4px, 4px); }
    #mobile-menu-toggle.is-active span:nth-child(2) { opacity: 0; }
    #mobile-menu-toggle.is-active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

    /* STYL SEKCJI (z index.html) */
    .section {
      margin-top: 32px;
      border-radius: var(--radius-xl);
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid var(--border-subtle);
      padding: 24px 20px 20px;
    }
    .section-header { margin-bottom: 20px; }
    .section-title {
      font-size: clamp(22px, 3vw, 28px);
      font-weight: 700;
      letter-spacing: -0.02em;
      margin: 8px 0;
    }
    .section-kicker {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--accent);
    }
    .section p, .section li {
      font-size: 14px;
      line-height: 1.7;
      color: var(--text-muted);
    }
    .section p strong, .section li strong {
      color: var(--text-main);
      font-weight: 600;
    }

    /* STYL KARTY (z index.html) */
    .card {
      border-radius: 18px;
      background: radial-gradient(circle at 0 0, rgba(122,162,255,.08), transparent 55%),
                  rgba(15, 23, 42, 0.95);
      border: 1px solid var(--border-subtle);
      padding: 20px 18px 18px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 14px;
      height: 100%;
    }
    .card h3 {
      font-size: 1.2rem;
      font-weight: 600;
      letter-spacing: -0.02em;
      margin: 0 0 4px;
    }
    .card p { margin: 0; }
    .card-actions {
      margin-top: auto;
      padding-top: 16px;
    }
    /* Dostosowanie .btn-ghost wewnątrz kart */
    .card .btn-ghost {
      font-size: 12px;
      padding: 8px 16px;
    }

    /* ================================================================
      STYLE SPECYFICZNE DLA TEJ PODSTRONY (neuroroznorodnosc.html)
      ================================================================
    */
    .chips-nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      gap: 10px;
      margin: 24px 0;
      padding: 0 0 20px 0;
      list-style: none;
      border-bottom: 1px solid var(--border-subtle);
    }
    .chip {
      border: 1px solid var(--border-subtle);
      background: rgba(15, 23, 42, 0.9);
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      text-decoration: none;
      color: var(--text-muted);
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .chip:hover {
      background: rgba(15, 23, 42, 0.98);
      border-color: rgba(148, 163, 184, 0.6);
      color: var(--text-main);
      transform: translateY(-1px);
    }
    .chip.active {
      background: var(--accent);
      color: #0b1120;
      border-color: var(--accent);
      box-shadow: 0 6px 20px rgba(122,162,255, 0.25);
    }
    /* Złoty chip dla Metody Kraszewskiego */
    .chip[href="#metoda-kraszewskiego"].active {
      background: var(--gold);
      border-color: var(--gold);
      color: #0b1120;
      box-shadow: 0 6px 20px rgba(250, 204, 21, 0.25);
    }
    .chip-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: var(--gold);
      display: inline-block;
    }
    .content-block {
      margin-top: 24px;
      /* Domyślne style .card są już zastosowane */
    }
    /* Koniec styli specyficznych dla strony */


    /* Stopka (z index.html) */
    .footer-bar {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid rgba(148, 163, 184, 0.45);
      text-align: center;
      font-size: 12px;
      color: var(--text-muted);
    }
    .social-links{display:flex; justify-content:center; gap:24px; margin-bottom:16px}
    .social-links a{color:var(--text-muted); transition:color .2s, transform .2s}
    .social-links a:hover{color:var(--text-main); transform:translateY(-2px); opacity:1}

    /* Mobile (z index.html) */
    @media (max-width: 900px) {
      #mobile-menu-toggle {
        display: block;
      }
      .main-nav {
        position: fixed;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100vh;
        background: rgba(15, 23, 42, 0.98);
        backdrop-filter: blur(10px);
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 24px;
        margin-top: 0;
        padding: 0;
        border-top: none;
        transition: left 0.4s cubic-bezier(.23,1,.32,1);
        z-index: 1000;
      }
      .main-nav.is-open {
        left: 0;
      }
      .main-nav a {
        font-size: 1.5rem;
        padding: 10px 20px;
      }
      .shell {
        padding: 22px 16px 22px;
        border-radius: 0;
      }
      .page {
        padding: 0 0 28px;
      }
      .cta-row {
        flex-direction: column;
        align-items: stretch;
      }
      .btn-primary,
      .btn-ghost {
        width: 100%;
        justify-content: center;
      }
      .lead { font-size: 1rem; }
      h1 { font-size: clamp(28px, 8vw, 36px); }
    }
  </style>
</head>
<body>
  
  <div class="page">
    <main class="shell">
      <div class="shell-inner">
        
        <!-- NOWY HEADER -->
        <header>
          <!-- POPRAWKA: Cały header (eyebrow) jest linkiem do strony głównej -->
          <a href="index.html" class="eyebrow" title="Wróć do strony głównej NCNI">
            <img src="logo.png" alt="Logo NCNI" class="eyebrow-logo">
            NCNI / Podejście ND-Affirming
          </a>
          <div>
            <h1>
              <span>Neuroróżnorodność</span> — podejście i praktyka.
            </h1>
            <p class="lead">
              Różne mózgi. Równe szanse. Projektujemy środowisko, procesy i komunikację tak, by były przewidywalne, sensorycznie przyjazne i elastyczne.
            </p>
            <div class="cta-row">
              <a href="#spis" class="btn-primary">Zobacz profile poznawcze →</a>
              <a href="index.html#kontakt" class="btn-ghost">Umów konsultację ND</a>
            </div>
          </div>
        </header>

        <!-- NOWA NAWIGACJA (z index.html) -->
        <button id="mobile-menu-toggle" aria-label="Otwórz menu" aria-expanded="false">
          <span></span><span></span><span></span>
        </button>
        <nav id="main-nav" class="main-nav" aria-label="Główne menu">
          <a href="index.html#sciezki">Ścieżki Neuro</a>
          <a href="index.html#oferta">Oferta</a>
          <a href="migrena.html">Migrena</a>
          <a href="neuroroznorodnosc.html" class="active">Neuroróżnorodność</a>
          <a href="wiedza.html">Wiedza</a>
          <a href="index.html#onas">O nas</a>
          <a href="index.html#zespol">Zespół</a>
          <a href="index.html#techlab">Tech Lab</a>
          <a href="index.html#kontakt">Kontakt</a>
        </nav>

        <!-- SEKCJA GŁÓWNA -->
        <section class="section" id="main-content">
          <div class="section-header">
            <div class="section-kicker">Nawigacja</div>
            <h2 id="spis" class="section-title">Profile Poznawcze</h2>
          </div>

          <!-- CHIPS NAVIGATION (z nowymi stylami) -->
          <nav class="chips-nav" role="tablist" aria-label="Lista zagadnień neuroróżnorodności">
            <a class="chip" href="#adhd" role="tab" aria-controls="adhd">ADHD/ADD</a>
            <a class="chip" href="#asd" role="tab" aria-controls="asd">Autyzm (ASD)</a>
            <a class="chip" href="#dysleksja" role="tab" aria-controls="dysleksja">Dysleksja</a>
            <a class="chip" href="#dyskalkulia" role="tab" aria-controls="dyskalkulia">Dyskalkulia</a>
            <a class="chip" href="#dcd" role="tab" aria-controls="dcd">Dysprazja (DCD)</a>
            <a class="chip" href="#tourette" role="tab" aria-controls="tourette">Tiki/Tourette</a>
            <a class="chip" href="#wysoka-wrazliwosc" role="tab" aria-controls="wysoka-wrazliwosc">Wysoka wrażliwość</a>
            <a class="chip" href="#metoda-kraszewskiego" role="tab" aria-controls="metoda-kraszewskiego">
              <span class="chip-dot"></span>
              Metoda Kraszewskiego
            </a>
          </nav>

          <!-- CONTENT SECTIONS (karty z nowymi stylami) -->
          <div class="content-container">
            
            <div id="adhd" class="card content-block" tabindex="-1">
              <h3>ADHD / ADD</h3>
              <p>Wsparcie skupienia, regulacja bodźców i impulsów. Programy łączą VR, trening oddechu i biofeedback EEG/HRV. W pracy zespołowej stosujemy „rytmy sprintu”, mikro-przerwy sensoryczne i klarowną strukturę zadań.</p>
              <div class="card-actions">
                <a class="btn-ghost" href="adhd.html">Dowiedz się więcej →</a>
              </div>
            </div>

            <div id="asd" class="card content-block" tabindex="-1">
              <h3>Autyzm (ASD)</h3>
              <p>Projektujemy środowisko sensorycznie przewidywalne, pracę z rytuałami i wspierającą komunikacją. W sesjach używamy spokojnych scen VR, modulacji dźwięku i pracy nad regulacją napięcia.</p>
              <div class="card-actions">
                <a class="btn-ghost" href="asd.html">Dowiedz się więcej →</a>
              </div>
            </div>

            <div id="dysleksja" class="card content-block" tabindex="-1">
              <h3>Dysleksja</h3>
              <p>Strategie kompensacyjne, trening uwagi wzrokowo-słuchowej i budowanie przyjaznego „pipeline’u pracy” z narzędziami AI (czytanie wspomagane, TTS/STS, dyktowanie).</p>
              <div class="card-actions">
                <a class="btn-ghost" href="dysleksja.html">Dowiedz się więcej →</a>
              </div>
            </div>

            <div id="dyskalkulia" class="card content-block" tabindex="-1">
              <h3>Dyskalkulia</h3>
              <p>Wsparcie rozumienia ilości/relacji, wizualizacje 3D w VR i grywalizowane mikro-ćwiczenia. Budujemy odporność na stres zadaniowy i wzmacniamy poczucie skuteczności.</p>
              <div class="card-actions">
                <a class="btn-ghost" href="dyskalkulia.html">Dowiedz się więcej →</a>
              </div>
            </div>

            <div id="dcd" class="card content-block" tabindex="-1">
              <h3>Dysprazja (DCD)</h3>
              <p>Koordynacja, propriocepcja i bezpieczeństwo ruchowe. Łączymy łagodne sceny VR, biofeedback oddechowy i sekwencje ruchowe w trybie „slow-flow”.</p>
              <div class="card-actions">
                <a class="btn-ghost" href="dcd.html">Dowiedz się więcej →</a>
              </div>
            </div>

            <div id="tourette" class="card content-block" tabindex="-1">
              <h3>Tiki / Tourette</h3>
              <p>Redukcja pobudzenia, reset napięcia i praca z nawykiem reakcji. Stosujemy krótkie protokoły oddechowe oraz scenariusze VR o niskiej stymulacji.</p>
              <div class="card-actions">
                <a class="btn-ghost" href="tourette.html">Dowiedz się więcej →</a>
              </div>
            </div>

            <div id="wysoka-wrazliwosc" class="card content-block" tabindex="-1">
              <h3>Wysoka wrażliwość (HSP)</h3>
              <p>Higiena bodźców, „przestrzenie wytchnienia” i mikro-rytuały regeneracji. Edukujemy zespoły, jak projektować spotkania i komunikację przyjazną HSP.</p>
              <div class="card-actions">
                <a class="btn-ghost" href="wysoka-wrazliwosc.html">Dowiedz się więcej →</a>
              </div>
            </div>

            <div id="metoda-kraszewskiego" class="card content-block" tabindex="-1" aria-label="Metoda Kraszewskiego">
              <h3>Metoda Kraszewskiego</h3>
              <p>Opracowana w NCNI przez dr hab. inż. Sebastiana Kraszewskiego i Karola Kiszło metoda łączy neuromodulację, biofeedback (EEG/HRV), immersję VR oraz protokoły oddechowe. Cel: precyzyjna regulacja stresu, poprawa koncentracji i wspieranie neuroplastyczności.</p>
              <div class="card-actions">
                <a class="btn-ghost" href="metoda-kraszewskiego.html">Dedykowana strona metody →</a>
              </div>
            </div>

          </div>
        </section>

        <!-- NOWA STOPKA (z index.html) -->
        <div class="footer-bar">
          <div class="social-links" aria-label="Linki społecznościowe">
            <a href="https://x.com/Neuroinnowacje" target="_blank" rel="noopener" aria-label="Profil NCNI na platformie X">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" 24" fill="currentColor" role="img" aria-hidden="true"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg>
            </a>
            <a href="https://youtube.com/@Neuroinnowacje" target="_blank" rel="noopener" aria-label="Kanał NCNI na YouTube">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" 24" fill="currentColor" role="img" aria-hidden="true"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0C.488 3.411 0 5.822 0 12s.488 8.589 4.385 8.816c3.6.245 11.626.246 15.23 0C23.512 20.589 24 18.178 24 12s-.488-8.589-4.385-8.816ZM9.545 15.568V8.432L15.818 12l-6.273 3.568Z"/></svg>
            </a>
          </div>
          © <span id="year"></span> NCNI. Wszelkie prawa zastrzeżone. <br>
          <span class="footer-credit" style="opacity: 0.7;">Designed & built by Karol Kiszło</span>
        </div>
      </div>
    </main>
  </div>

  <!-- NOWE SKRYPTY (z index.html + logika scroll-spy) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Skrypt na rok w stopce
      document.getElementById('year').textContent = new Date().getFullYear();
      
      // Skrypt do nawigacji (scroll do #id) - usunięty, bo psuje scroll-spy
      document.querySelectorAll('.main-nav a[href^="index.html#"], .btn-ghost[href^="index.html#"], .btn-primary[href^="index.html#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            // To są linki do strony głównej, pozwól im działać normalnie
        });
      });

      // Skrypt dla menu mobilnego
      const toggleBtn = document.getElementById('mobile-menu-toggle');
      const mainNav = document.getElementById('main-nav');
      
      if (toggleBtn && mainNav) {
        const toggleMenu = () => {
          mainNav.classList.toggle('is-open');
          toggleBtn.classList.toggle('is-active');
          toggleBtn.setAttribute('aria-expanded', mainNav.classList.contains('is-open'));
          document.body.style.overflow = mainNav.classList.contains('is-open') ? 'hidden' : '';
        };
        toggleBtn.addEventListener('click', e => { e.stopPropagation(); toggleMenu(); });
        mainNav.querySelectorAll('a').forEach(a => {
          a.addEventListener('click', () => {
            if (mainNav.classList.contains('is-open')) {
              toggleMenu();
            }
          });
        });
      }

      // --- Page-Specific: Chips Scroll-spy (przeniesione z starego kodu) ---
      const chips = Array.from(document.querySelectorAll('.chip'));
      const chipTargets = chips.map(c => {
          const href = c.getAttribute('href');
          if (href && href.startsWith('#')) {
            return document.querySelector(href);
          }
          return null;
        }).filter(Boolean);
      
      if (chips.length > 0 && chipTargets.length > 0) {
        
        const activateByHash = () => {
          const h = location.hash || (chips.length > 0 ? chips[0].getAttribute('href') : '#');
          if (h && h.startsWith('#')) {
             setActive(h);
             // Płynne przewinięcie do hasha przy pierwszym ładowaniu
             const targetElement = document.getElementById(h.substring(1));
             if (targetElement && location.hash) {
                // Używamy 'auto' zamiast 'smooth' przy ładowaniu, by było natychmiastowe
                targetElement.scrollIntoView({ behavior: 'auto', block: 'start' });
             }
          }
        };

        const setActive = (targetId) => {
          if (!targetId) return;
          chips.forEach(c => c.classList.toggle('active', c.getAttribute('href') === targetId));
        };

        // Kliknięcie na chip
        chips.forEach(chip => {
          chip.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href && href.startsWith('#')) {
              e.preventDefault();
              const targetElement = document.getElementById(href.substring(1));
              if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                if (history.pushState) {
                    history.pushState(null, '', href);
                } else {
                    location.hash = href;
                }
                setActive(href);
              }
            }
          });
        });

        // CTA w headerze
        const ctaButton = document.querySelector('.btn-primary[href="#spis"]');
        if (ctaButton) {
            ctaButton.addEventListener('click', function(e) {
                e.preventDefault();
                const targetElement = document.getElementById('spis');
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    if (history.pushState) {
                        history.pushState(null, '', '#spis');
                    } else {
                        location.hash = '#spis';
                    }
                }
            });
        }

        // Obserwer do scroll-spy
        const chipObserver = new IntersectionObserver((entries) => {
          entries.forEach(e => {
            if(e.isIntersecting) {
              const id = '#' + e.target.id;
              // Używamy bardziej liberalnego ratio, aby aktywować
              if (e.intersectionRatio > 0.1) { // Zmieniono z 0.6 na 0.1
                if (history.replaceState) {
                  history.replaceState(null, '', id);
                }
                setActive(id);
              }
            }
          });
        }, { 
            rootMargin: '-30% 0px -60% 0px', // Aktywuj, gdy element jest bliżej górnej 1/3 ekranu
            threshold: 0.1 
        });

        chipTargets.forEach(s => s && chipObserver.observe(s));
        window.addEventListener('hashchange', activateByHash);
        
        // Uruchom przy ładowaniu strony
        activateByHash(); 
      }
    });
  </script>
</body>
</html>
